<?php

/*
 * Localization addon for Bear Framework
 * https://github.com/bearframework/localization-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var f=function(e,a){var t=GET_TEXT_FUNCTION_TO_REPLACE,o=LOCALE_TO_REPLACE,r=function(e,a){return e.replace("%s",a)},n=new Date(e),i=new Date,h=Math.floor(n.getTime()/1e3),m=Math.floor(i.getTime()/1e3);void 0===a&&(a=["dateAutoYear"]);var l,g={},u=function(e){return-1!==a.indexOf(e)},f=u("date"),y=u("dateAutoYear"),d=u("month"),D=u("year"),s=u("monthDay"),c=u("weekDay"),k=u("weekDayShort"),w=u("time");if(u("timeAgo")){var v=m-h;if(v<60)g.timeAgo=t("bearframework-localization-addon.moment_ago");else if(v<3600){var _=Math.floor(v/60);g.timeAgo=_>1?r(t("bearframework-localization-addon.minutesAgo_ago"),_):t("bearframework-localization-addon.minute_ago")}else if(v<86400){var b=Math.floor(v/3600);g.timeAgo=b>1?r(t("bearframework-localization-addon.hours_ago"),b):t("bearframework-localization-addon.hour_ago")}else y=!0}if((f||y||s)&&(g.monthDay=n.getDate()),(f||y||d)&&(g.month=t("bearframework-localization-addon.month_"+(n.getMonth()+1))),f||D||y){var p=n.getFullYear();y&&p===i.getFullYear()||("bg"===o&&(p+="г."),g.year=p)}c&&(0===(l=n.getDay())&&(l=7),g.weekDay=t("bearframework-localization-addon.day_"+l));k&&(0===(l=n.getDay())&&(l=7),g.weekDay=t("bearframework-localization-addon.day_"+l+"_short"));w&&(g.time="bg"===o?n.getHours()+":"+n.getMinutes().toString().padStart(2,"0")+"ч.":n.getHours()+":"+n.getMinutes().toString().padStart(2,"0"));var A=[];-1!==["bg","ru"].indexOf(o)?(A.push("{weekDay}, {monthDay} {month} {year}"),A.push("{weekDay}, {monthDay} {month}"),A.push("{monthDay} {month} {year}"),A.push("{monthDay} {month}")):(A.push("{weekDay}, {month} {monthDay}, {year}"),A.push("{weekDay}, {month} {monthDay}"),A.push("{month} {monthDay}, {year}"),A.push("{month} {monthDay}"));for(var O="",z=Object.keys(g),T=0;T<A.length;T++){var E=A[T],M=E.match(/\{.*?\}/g);if(null!==M&&M.length>0){var S=M.map((function(e){return e.replace(/{|}/g,"")}));if(S.filter((function(e){return-1!==z.indexOf(e)})).length===S.length){O=E;for(var C=0;C<S.length;C++)O=O.replace("{"+S[C]+"}",g[S[C]]),delete g[S[C]];break}}}var L=Object.values(g);return L.length>0&&(""!==O&&(O+=","),O+=" "+L.join(", ")),O};
EOT;
