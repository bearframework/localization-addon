<?php

/*
 * Localization addon for Bear Framework
 * https://github.com/bearframework/localization-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var f=function(e,a){var t=GET_TEXT_FUNCTION_TO_REPLACE,o=LOCALE_TO_REPLACE,r=function(e,a){return e.replace("%s",a)},n=new Date(e),i=new Date,h=Math.floor(n.getTime()/1e3),m=Math.floor(i.getTime()/1e3);void 0===a&&(a=["dateAutoYear"]);var g,l={},u=function(e){return-1!==a.indexOf(e)},d=u("date"),f=u("dateAutoYear"),y=u("month"),s=u("monthShort"),D=u("year"),c=u("autoYear"),w=u("monthDay"),k=u("weekDay"),b=u("weekDayShort"),v=u("weekNumber"),_=u("time"),p=u("seconds");if(u("timeAgo")){var S=m-h;if(S<60)l.timeAgo=t("bearframework-localization-addon.moment_ago");else if(S<3600){var A=Math.floor(S/60);l.timeAgo=A>1?r(t("bearframework-localization-addon.minutesAgo_ago"),A):t("bearframework-localization-addon.minute_ago")}else if(S<86400){var T=Math.floor(S/3600);l.timeAgo=T>1?r(t("bearframework-localization-addon.hours_ago"),T):t("bearframework-localization-addon.hour_ago")}else f=!0}if((d||f||w)&&(l.monthDay=n.getDate()),(d||f||y)&&(l.month=t("bearframework-localization-addon.month_"+(n.getMonth()+1))),s&&(l.month=t("bearframework-localization-addon.month_"+(n.getMonth()+1)+"_short")),d||D||f||c){var z=n.getFullYear();(f||c)&&z===i.getFullYear()||("bg"===o&&(z+="г."),l.year=z)}k&&(0===(g=n.getDay())&&(g=7),l.weekDay=t("bearframework-localization-addon.day_"+g));b&&(0===(g=n.getDay())&&(g=7),l.weekDay=t("bearframework-localization-addon.day_"+g+"_short"));if(v){var M=new Date(n);M.setHours(0,0,0,0),M.setDate(M.getDate()+3-(M.getDay()+6)%7);var O=new Date(M.getFullYear(),0,4);l.weekNumber=(1+Math.round(((M.getTime()-O.getTime())/864e5-3+(O.getDay()+6)%7)/7)).toString()}(_||p)&&(l.time="bg"===o?n.getHours()+":"+n.getMinutes().toString().padStart(2,"0")+(p?":"+n.getSeconds().toString().padStart(2,"0"):"")+"ч.":n.getHours()+":"+n.getMinutes().toString().padStart(2,"0")+(p?":"+n.getSeconds().toString().padStart(2,"0"):""));var E=[];-1!==["bg","ru"].indexOf(o)?(E.push("{weekDay}, {monthDay} {month} {year}"),E.push("{weekDay}, {monthDay} {month}"),E.push("{monthDay} {month} {year}"),E.push("{monthDay} {month}")):(E.push("{weekDay}, {month} {monthDay}, {year}"),E.push("{weekDay}, {month} {monthDay}"),E.push("{month} {monthDay}, {year}"),E.push("{month} {monthDay}"));for(var Y="",C=Object.keys(l),F=0;F<E.length;F++){var L=E[F],N=L.match(/\{.*?\}/g);if(null!==N&&N.length>0){var j=N.map((function(e){return e.replace(/{|}/g,"")}));if(j.filter((function(e){return-1!==C.indexOf(e)})).length===j.length){Y=L;for(var x=0;x<j.length;x++)Y=Y.replace("{"+j[x]+"}",l[j[x]]),delete l[j[x]];break}}}var H=Object.values(l);return H.length>0&&(""!==Y&&(Y+=","),Y=(Y+=" "+H.join(", ")).trim()),Y};
EOT;
